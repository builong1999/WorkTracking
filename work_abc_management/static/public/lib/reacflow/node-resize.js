/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@reactflow/node-resizer@2.1.1/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{jsx as e,jsxs as t,Fragment as i}from"/npm/react@18.2.0/jsx-runtime/+esm";import{memo as n,useRef as o,useEffect as r}from"/npm/react@18.2.0/+esm";import s from"/npm/classcat@5.0.4/+esm";import{drag as d}from"/npm/d3-drag@3.0.0/+esm";import{select as a}from"/npm/d3-selection@3.0.0/+esm";import{useNodeId as h,useStoreApi as c,useGetPointerPosition as l,clamp as p}from"/npm/@reactflow/core@11.10.1/+esm";var m;!function(e){e.Line="line",e.Handle="handle"}(m||(m={}));const u={width:0,height:0,x:0,y:0},g={...u,pointerX:0,pointerY:0,aspectRatio:1};var f=n((function({nodeId:t,position:i,variant:n=m.Handle,className:f,style:R={},children:x,color:y,minWidth:z=10,minHeight:S=10,maxWidth:v=Number.MAX_VALUE,maxHeight:w=Number.MAX_VALUE,keepAspectRatio:N=!1,shouldResize:b,onResizeStart:A,onResize:H,onResizeEnd:W}){const X=h(),E="string"==typeof t?t:X,L=c(),C=o(null),I=o(g),M=o(u),_=l(),k=n===m.Line?"right":"bottom-right",V=i??k;r((()=>{if(!C.current||!E)return;const e=a(C.current),t=V.includes("right")||V.includes("left"),i=V.includes("bottom")||V.includes("top"),n=V.includes("left"),o=V.includes("top"),r=d().on("start",(e=>{const t=L.getState().nodeInternals.get(E),{xSnapped:i,ySnapped:n}=_(e);M.current={width:t?.width??0,height:t?.height??0,x:t?.position.x??0,y:t?.position.y??0},I.current={...M.current,pointerX:i,pointerY:n,aspectRatio:M.current.width/M.current.height},A?.(e,{...M.current})})).on("drag",(e=>{const{nodeInternals:r,triggerNodeChanges:s}=L.getState(),{xSnapped:d,ySnapped:a}=_(e),h=r.get(E);if(h){const r=[],{pointerX:c,pointerY:l,width:m,height:u,x:g,y:f,aspectRatio:R}=I.current,{x:x,y:y,width:A,height:W}=M.current,X=Math.floor(t?d-c:0),L=Math.floor(i?a-l:0);let C=p(m+(n?-X:X),z,v),_=p(u+(o?-L:L),S,w);if(N){const e=C/_,n=t&&i;C=e<=R&&n||i&&!t?_*R:C,_=e>R&&n||t&&!i?C/R:_,C>=v?(C=v,_=v/R):C<=z&&(C=z,_=z/R),_>=w?(_=w,C=w*R):_<=S&&(_=S,C=S*R)}const k=C!==A,V=_!==W;if(n||o){const e=n?g-(C-m):g,t=o?f-(_-u):f,i=e!==x&&k,s=t!==y&&V;if(i||s){const n={id:h.id,type:"position",position:{x:i?e:x,y:s?t:y}};r.push(n),M.current.x=n.position.x,M.current.y=n.position.y}}if(k||V){const e={id:E,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:C,height:_}};r.push(e),M.current.width=C,M.current.height=_}if(0===r.length)return;const Y=function({width:e,prevWidth:t,height:i,prevHeight:n,invertX:o,invertY:r}){const s=e-t,d=i-n,a=[s>0?1:s<0?-1:0,d>0?1:d<0?-1:0];return s&&o&&(a[0]=-1*a[0]),d&&r&&(a[1]=-1*a[1]),a}({width:M.current.width,prevWidth:A,height:M.current.height,prevHeight:W,invertX:n,invertY:o}),U={...M.current,direction:Y},j=b?.(e,U);if(!1===j)return;H?.(e,U),s(r)}})).on("end",(e=>{const t={id:E,type:"dimensions",resizing:!1};W?.(e,{...M.current}),L.getState().triggerNodeChanges([t])}));return e.call(r),()=>{e.on(".drag",null)}}),[E,V,z,S,v,w,N,_,A,H,W]);const Y=V.split("-"),U=n===m.Line?"borderColor":"backgroundColor",j=y?{...R,[U]:y}:R;return e("div",{className:s(["react-flow__resize-control","nodrag",...Y,n,f]),ref:C,style:j,children:x})}));const R=["top-left","top-right","bottom-left","bottom-right"],x=["top","right","bottom","left"];function y({nodeId:n,isVisible:o=!0,handleClassName:r,handleStyle:s,lineClassName:d,lineStyle:a,color:h,minWidth:c=10,minHeight:l=10,maxWidth:p=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:g=!1,shouldResize:y,onResizeStart:z,onResize:S,onResizeEnd:v}){return o?t(i,{children:[x.map((t=>e(f,{className:d,style:a,nodeId:n,position:t,variant:m.Line,color:h,minWidth:c,minHeight:l,maxWidth:p,maxHeight:u,onResizeStart:z,keepAspectRatio:g,shouldResize:y,onResize:S,onResizeEnd:v},t))),R.map((t=>e(f,{className:r,style:s,nodeId:n,position:t,color:h,minWidth:c,minHeight:l,maxWidth:p,maxHeight:u,onResizeStart:z,keepAspectRatio:g,shouldResize:y,onResize:S,onResizeEnd:v},t)))]}):null}export{f as NodeResizeControl,y as NodeResizer,m as ResizeControlVariant};export default null;
//# sourceMappingURL=/sm/c5ed38c6a83df1931386327f32e973243c9eaab2b32f0c73d933ff20fdfd72ca.map
